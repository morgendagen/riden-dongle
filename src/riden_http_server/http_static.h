// SPDX-FileCopyrightText: 2024 Peder Toftegaard Olsen
//
// SPDX-License-Identifier: MIT

#pragma once

#include <sys/pgmspace.h>

// DO NOT MODIFY THIS SECTION. IT IS MAINTAINED BY 'extract_code.py', generated from 'mockup.html'.
static const char HTML_HEADER[] PROGMEM =
    "<html>\n"
    "  <head>\n"
    "    <title>Riden Multi-Purpose WiFi Dongle</title>\n"
    "    <style>\n"
    "      body {\n"
    "        font-family: sans-serif;\n"
    "        width: 50%;\n"
    "        min-width: 720px;\n"
    "        margin: 10px auto 0 auto;\n"
    "        color: #383428;\n"
    "      }\n"
    "      div {\n"
    "        margin-bottom: 6px;\n"
    "      }\n"
    "      div.header {\n"
    "        margin-bottom: 10px;\n"
    "      }\n"
    "      a#configure {\n"
    "        float: right;\n"
    "      }\n"
    "      div.box {\n"
    "        background-color: #e4e4e2;\n"
    "        margin-top: 10px;\n"
    "        padding: 4px;\n"
    "      }\n"
    "      div.danger {\n"
    "        background-color: #ed2939;\n"
    "      }\n"
    "      .danger {\n"
    "        color: white;\n"
    "      }\n"
    "      .danger a,\n"
    "      .danger a:hover,\n"
    "      .danger a:active,\n"
    "      .danger a:visited {\n"
    "        color: white;\n"
    "      }\n"
    "      .box table {\n"
    "        width: 100%;\n"
    "      }\n"
    "      .box h2 {\n"
    "        text-align: center;\n"
    "        margin: 0 0 8px 0;\n"
    "      }\n"
    "      .box td,\n"
    "      th {\n"
    "        text-align: left;\n"
    "      }\n"
    "      table.info th {\n"
    "        text-align: right;\n"
    "        padding-right: 10px;\n"
    "        width: 50%;\n"
    "      }\n"
    "      table.info td {\n"
    "        text-align: left;\n"
    "        padding-left: 10px;\n"
    "        width: 50%;\n"
    "      }\n"
    "      table.clients th {\n"
    "        text-align: left;\n"
    "      }\n"
    "      table.clients td {\n"
    "        text-align: left;\n"
    "      }\n"
    "      table.clients form {\n"
    "        display: inline;\n"
    "      }\n"
    "      .bigtext {\n"
    "        font-size: 3em;\n"
    "        font-weight: bold;\n"
    "        font-family: \"Noto Sans Mono\", monospace;\n"
    "        text-align: right !important;\n"
    "        white-space: nowrap;\n"
    "        width: 8ch;\n"
    "      }\n"
    "      .smalltext {\n"
    "        font-size: 1em;\n"
    "        text-align: right !important;\n"
    "        white-space: nowrap;\n"
    "      }\n"
    "      span.smalltext {\n"
    "        font-weight: bold;\n"
    "        font-family: \"Noto Sans Mono\", monospace;\n"
    "        width: 7ch;\n"
    "      }\n"
    "      table.control {\n"
    "        border-collapse: collapse;\n"
    "        width: 100%;\n"
    "      }\n"
    "      table.control td,\n"
    "      table.control th {\n"
    "        padding-left: 10px;\n"
    "        padding-right: 10px;\n"
    "      }\n"
    "      table.control th {\n"
    "        text-align: center;\n"
    "      }\n"
    "      table.control th:nth-child(1),\n"
    "      table.control td:nth-child(1) {\n"
    "        text-align: right;\n"
    "        white-space: nowrap;\n"
    "      }\n"
    "      table.control td:nth-child(2) {\n"
    "        text-align: center;\n"
    "        white-space: nowrap;\n"
    "      }\n"
    "      .onoff {\n"
    "        text-align: center !important;\n"
    "      }\n"
    "      .onoff button {\n"
    "        font-size: 1.5em;\n"
    "      }\n"
    "      .onoff button.is_on {\n"
    "        background-color: #0f0 !important;\n"
    "        color: black !important;\n"
    "      }\n"
    "      .onoff button.is_on:hover {\n"
    "        background-color: rgb(135, 255, 135) !important;\n"
    "      }\n"
    "      .control button {\n"
    "        margin: 0px 0px 0px 0px;\n"
    "        color: white;\n"
    "        background-color: #666;\n"
    "        padding: 4px 12px;\n"
    "        border-radius: 4px;\n"
    "        border: 1px solid #888;\n"
    "        width: 100%;\n"
    "        cursor: pointer;\n"
    "      }\n"
    "      .control button.active {\n"
    "        background-color: rgb(212, 212, 212) !important;\n"
    "        color: black !important;\n"
    "      }\n"
    "      .control button:hover {\n"
    "        background-color: rgb(200, 200, 200) !important;\n"
    "      }\n"
    "      .control input[type=\"number\"] {\n"
    "        font-family: \"Noto Sans Mono\", monospace;\n"
    "        font-size: 1.2em;\n"
    "        text-align: right;\n"
    "      }\n"
    "      td.timescale {\n"
    "        vertical-align: top;\n"
    "        padding-top: 20px;\n"
    "      }\n"
    "      .timescale button {\n"
    "        margin-top: 10px;\n"
    "      }\n"
    "      svg {\n"
    "        background-color: rgb(233, 233, 233);\n"
    "      }\n"
    "    </style>\n"
    "  </head>\n"
    "  <body>\n"
    "    <a id=\"home\" href=\"/\">Home</a>&nbsp;\n"
    "    <a id=\"control\" href=\"/control/\">Control</a>\n"
    "    <a id=\"configure\" href=\"/config/\">Configure</a>";
// END OF SECTION GENERATED BY 'extract_code.py'

static const char HTML_FOOTER[] PROGMEM =
    "    </body>"
    "</html>";

static const char HTML_CONFIG_BODY_1[] PROGMEM =
    "<form method='post'>"
    "    <div class='box'>"
    "        <h2>Dongle Configuration</h2>"
    "        <table class='info'>"
    "            <tbody>"
    "                <tr>"
    "                    <th>Time Zone</th>"
    "                    <td><select name='timezone'>";

static const char HTML_CONFIG_BODY_2[] PROGMEM =
    "                    </select></td>"
    "                </tr>"
    "                <tr>"
    "                    <th>UART baudrate</th>"
    "                    <td><select name='uart_baudrate'>";

static const char HTML_CONFIG_BODY_3[] PROGMEM =
    "                    </select></td>"
    "                </tr>"
    "                <tr><th></th><td><input type='submit' value='Save'></td></tr>"
    "            </tbody>"
    "        </table>"
    "    </div>"
    "</form>"
    "<form method='post' action='/firmware/update/' enctype='multipart/form-data'>"
    "    <div class='box'>"
    "        <h2>Firmware Update</h2>"
    "        <table class='info'>"
    "            <tbody>"
    "                <tr>"
    "                    <th>Firmware .bin file</th>"
    "                    <td><input type='file' name='firmware' accept='.bin,.gz'></td>"
    "                </tr>"
    "                <tr><th></th><td><input type='submit' value='Update'></td></tr>"
    "            </tbody>"
    "        </table>"
    "    </div>"
    "</form>"
    "<div class='box danger'>"
    "    <h2>Danger Zone</h2>"
    "    <a href='/reboot/dongle/'>Reboot Dongle</a><br>"
    "    <a href='/reboot/dongle/?config_portal=true'>Reboot Dongle to Web Configuration Portal</a><br>"
    "</div>";

static const char HTML_REBOOTING_DONGLE_BODY[] PROGMEM =
    "<div class='box'>"
    "    <h2>Dongle is Rebooting</h2>"
    "    <div><p>Redirecting to main page in <span id='counter'>10</span> seconds.</p>"
    "    <p><a href='/'>Return to main page</a></p>"
    "    </div>"
    "</div>"
    "<script>"
    "    setInterval(function() {"
    "        var div = document.querySelector('#counter');"
    "        var count = div.textContent * 1 - 1;"
    "        div.textContent = count;"
    "        if (count <= 0) {"
    "            window.location.replace('/');"
    "        }"
    "    }, 1000);"
    "</script>";

static const char HTML_REBOOTING_DONGLE_UPDATE_BODY[] PROGMEM =
    "<div class='box'>"
    "    <h2>Updated Dongle Firmware</h2>"
    "    <div><p>The dongle is now rebooting.</p>"
    "    <p>Redirecting to main page in <span id='counter'>20</span> seconds.</p>"
    "    <p><a href='/'>Return to main page</a></p>"
    "    </div>"
    "</div>"
    "<script>"
    "    setInterval(function() {"
    "        var div = document.querySelector('#counter');"
    "        var count = div.textContent * 1 - 1;"
    "        div.textContent = count;"
    "        if (count <= 0) {"
    "            window.location.replace('/');"
    "        }"
    "    }, 1000);"
    "</script>";

static const char HTML_DONGLE_UPDATE_1[] PROGMEM =
    "<div class='box'>"
    "    <h2>Dongle Firmware Failed to Update</h2>"
    "    <div><p>The failure is: <b>";

static const char HTML_DONGLE_UPDATE_2[] PROGMEM =
    "</b>."
    "</div>";

static const char HTML_REBOOTING_DONGLE_CONFIG_PORTAL_BODY_1[] PROGMEM =
    "<div class='box'>"
    "    <h2>Dongle is Rebooting</h2>"
    "    <div>An access point named <b>";

static const char HTML_REBOOTING_DONGLE_CONFIG_PORTAL_BODY_2[] PROGMEM =
    "</b> should show up shortly.</div>"
    "    <p>Connect to it and the config portal will show up.</p>";

static const char HTML_NO_CONNECTION_BODY[] PROGMEM =
    "<div class='box'>"
    "    <h2>Unable to communicate with power supply</h2>"
    "    <p>Make sure you have configured the power supply for TTL"
    " at the <a href='/config/'>configured</a> baudrate.</p>"
    "    <p>You must power-cycle the power supply if you modified"
    " its configuration.</p>"
    "</div>";


// Images are converted with https://www.base64-image.de/
// DO NOT MODIFY THIS SECTION. IT IS MAINTAINED BY 'extract_code.py', generated from 'mockup.html'.
static const char HTML_CONTROL_BODY[] PROGMEM = 
    "<div class=\"box\">\n"
    "  <a style=\"float: right\" href=\"/psu/\">Details</a>\n"
    "  <h2>Power Supply Control</h2>\n"
    "  <div>\n"
    "    <table class=\"control\">\n"
    "      <tbody>\n"
    "        <colgroup>\n"
    "          <col width=\"20%\" />\n"
    "          <col width=\"1%\" />\n"
    "          <col width=\"1%\" />\n"
    "          <col width=\"20%\" />\n"
    "        </colgroup>\n"
    "        <tr>\n"
    "          <th>Set</th>\n"
    "          <th></th>\n"
    "          <th>Output</th>\n"
    "          <th></th>\n"
    "        </tr>\n"
    "        <tr>\n"
    "          <td>\n"
    "            <input\n"
    "              type=\"number\"\n"
    "              id=\"set_v\"\n"
    "              size=\"6\"\n"
    "              value=\"\"\n"
    "              min=\"0\"\n"
    "              max=\"60\"\n"
    "              step=\"0.01\"\n"
    "            />\n"
    "          </td>\n"
    "          <td><button id=\"setv\" onclick=\"setv()\">V-Set &gt;</button></td>\n"
    "          <td><pre class=\"bigtext\" id=\"out_v\"> -.-- V</pre></td>\n"
    "          <td>\n"
    "            <img\n"
    "              id=\"cv\"\n"
    "              src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAhCAYAAACr8emlAAAEDmlDQ1BrQ0dDb2xvclNwYWNlR2VuZXJpY1JHQgAAOI2NVV1oHFUUPpu5syskzoPUpqaSDv41lLRsUtGE2uj+ZbNt3CyTbLRBkMns3Z1pJjPj/KRpKT4UQRDBqOCT4P9bwSchaqvtiy2itFCiBIMo+ND6R6HSFwnruTOzu5O4a73L3PnmnO9+595z7t4LkLgsW5beJQIsGq4t5dPis8fmxMQ6dMF90A190C0rjpUqlSYBG+PCv9rt7yDG3tf2t/f/Z+uuUEcBiN2F2Kw4yiLiZQD+FcWyXYAEQfvICddi+AnEO2ycIOISw7UAVxieD/Cyz5mRMohfRSwoqoz+xNuIB+cj9loEB3Pw2448NaitKSLLRck2q5pOI9O9g/t/tkXda8Tbg0+PszB9FN8DuPaXKnKW4YcQn1Xk3HSIry5ps8UQ/2W5aQnxIwBdu7yFcgrxPsRjVXu8HOh0qao30cArp9SZZxDfg3h1wTzKxu5E/LUxX5wKdX5SnAzmDx4A4OIqLbB69yMesE1pKojLjVdoNsfyiPi45hZmAn3uLWdpOtfQOaVmikEs7ovj8hFWpz7EV6mel0L9Xy23FMYlPYZenAx0yDB1/PX6dledmQjikjkXCxqMJS9WtfFCyH9XtSekEF+2dH+P4tzITduTygGfv58a5VCTH5PtXD7EFZiNyUDBhHnsFTBgE0SQIA9pfFtgo6cKGuhooeilaKH41eDs38Ip+f4At1Rq/sjr6NEwQqb/I/DQqsLvaFUjvAx+eWirddAJZnAj1DFJL0mSg/gcIpPkMBkhoyCSJ8lTZIxk0TpKDjXHliJzZPO50dR5ASNSnzeLvIvod0HG/mdkmOC0z8VKnzcQ2M/Yz2vKldduXjp9bleLu0ZWn7vWc+l0JGcaai10yNrUnXLP/8Jf59ewX+c3Wgz+B34Df+vbVrc16zTMVgp9um9bxEfzPU5kPqUtVWxhs6OiWTVW+gIfywB9uXi7CGcGW/zk98k/kmvJ95IfJn/j3uQ+4c5zn3Kfcd+AyF3gLnJfcl9xH3OfR2rUee80a+6vo7EK5mmXUdyfQlrYLTwoZIU9wsPCZEtP6BWGhAlhL3p2N6sTjRdduwbHsG9kq32sgBepc+xurLPW4T9URpYGJ3ym4+8zA05u44QjST8ZIoVtu3qE7fWmdn5LPdqvgcZz8Ww8BWJ8X3w0PhQ/wnCDGd+LvlHs8dRy6bLLDuKMaZ20tZrqisPJ5ONiCq8yKhYM5cCgKOu66Lsc0aYOtZdo5QCwezI4wm9J/v0X23mlZXOfBjj8Jzv3WrY5D+CsA9D7aMs2gGfjve8ArD6mePZSeCfEYt8CONWDw8FXTxrPqx/r9Vt4biXeANh8vV7/+/16ffMD1N8AuKD/A/8leAvFY9bLAAAAOGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAACoAIABAAAAAEAAAAooAMABAAAAAEAAAAhAAAAAFQ+JucAAAP5SURBVFgJ7ZZrbBRVFMf/M7vbdrvbhS6wpRQojRGJiQoaEwkvqWkKhIhpC7FVqiCEEhP8INVYAUWNSBQRCSghfBBrqcSmhEAQ0weGQLI8ojyUCAVstcWltLjb2U5nHzPuvTiXzs7sNsDS7gfmw95z/udxf3tm7mQ49LvMjnEKb7L0UwbfDAcFhIXrnLqzmRkRuIysmeBNGao0JGtQbIcfJ5Sw4KGQPKGwOMYr9qwZQw5HWaw5sI14GiZ7lkJ8jsDZXNNgMg8jftJcQfFv+LtOwmx1Tkk6ODIli3UsUu1doLc4acZmAJL0gOwUR8MXFk2Hw5YaLWv8UFBGfW2zRiMOn56G4uJpVO/sFnDkoFuXowrWMU7Mf24Kdf+47MHZ4+fVEF0NAecWz8CWtxbA6bBpkqMdSQqB5znU1TRpQil2K76qKqGa+3xbXMDcsS6Wu6POrQPU3eL5JTOx+c3nB4Qju6emmrG58gWUvJyvAUyko5tg5auzMTLTzvZ447P9EHv7mE8MjuOwY+1CqqWnWfB+xVz8UK2doqbgHhwdYP9eqz7dhz3VjVACof4ytWVFwc51i3R6ooW4gHvrjxnCEYj6vUfQ9z+4FAgmmov1iwvIsoyMsIJDdUeNIgnVdIckod0T0OwB4L0O8cEEH8pxYmnFPMNBZuZloWp5oWFMFe/LBAM+AWXvVNM9yEu/sjxfBzk814Uv15Ri3vRJNK/B3YKt3zaqXGy9+9eMicemjUtoI29PHz5Y/x1rKvcF0fDjCZRBQc2GxRiVaaOQXOTrbtfXB+AY78K2915C4dSJtKbpZAtWfVyL6xfbWQ/ViAu4/aNyVKzeBVmU1Pxba2TuWzctR2nhZOr/0yVoAIlIIQ+fQmnkw33PJ7cgVy9+Fk88ko1RwzNQ8MzDtLb51GW8/uH36LykhyMJcQGL8h8D//kyBIJh2uz2D4dFBY/fdmNYshhA408RyEicQjptKJvzJMv++fRVrFxfgxstHUyLNjjHhAWKJS2b6WMezcXBbSswbnQm0+IZXr+E2Uu2oO3c1ZhpvDUF+QVPoXZjOcs5+uufeO3d3ei+co1p0Yb47xn9J3/H762Ys3I7Ojq90fk63x+Z0KxXvogLR4rIJJsaTuPFt3fTHsfPtGJp1Tdx4dTNdBNUA66JObBYTKpruCqygo4LfxnGjEQ+PQXZeaMhCBK8rR6jFI1GJhjzGTQ6UZrqu3Dk3gDaf2u7o8r78h68I4IBkpMfUPA0IyTdGOB/DH5Y8l2E6D0LXhZ9XI/nMEKB7sGniLEjgfPfdEMR/Ry9xXJvD+e7dgjh4M0YJYMnS75LDI7syk6xIvZwdvkXBdLQPpbWlBCEyOTUkfwHqVxMBrxvsxUAAAAASUVORK5CYII=\"\n"
    "              style=\"visibility: hidden\"\n"
    "            />\n"
    "          </td>\n"
    "        </tr>\n"
    "        <tr>\n"
    "          <td>\n"
    "            <input\n"
    "              type=\"number\"\n"
    "              id=\"set_c\"\n"
    "              size=\"6\"\n"
    "              value=\"\"\n"
    "              min=\"0\"\n"
    "              max=\"30\"\n"
    "              step=\"0.01\"\n"
    "            />\n"
    "          </td>\n"
    "          <td><button id=\"seti\" onclick=\"seti()\">I-Set &gt;</button></td>\n"
    "          <td><pre class=\"bigtext\" id=\"out_i\"> -.-- A</pre></td>\n"
    "          <td>\n"
    "            <img\n"
    "              id=\"cc\"\n"
    "              src=\"data:image/png;base64,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\"\n"
    "              style=\"visibility: hidden\"\n"
    "            />\n"
    "          </td>\n"
    "        </tr>\n"
    "        <tr>\n"
    "          <td colspan=\"2\">\n"
    "            <table width=\"100%\" class=\"smalltext\">\n"
    "              <tr>\n"
    "                <td style=\"text-align: right; vertical-align: top\">\n"
    "                  <pre>Ah:<span id='ah'>   0.000</span> Ah<br>Wh:<span id='wh'>   0.000</span> Wh</pre>\n"
    "                </td>\n"
    "                <td width=\"1%\" style=\"text-align: right\">\n"
    "                  <pre>ext:<span id='ext_t_c'>-100.0</span>&deg;C<br>int:<span id='int_t_c'>   0.0</span>&deg;C<br>batt:<span id='batt_v'>  0.00</span> V</pre>\n"
    "                </td>\n"
    "              </tr>\n"
    "            </table>\n"
    "          </td>\n"
    "          <td class=\"onoff\">\n"
    "            <button id=\"toggle\" onclick=\"toggle()\">ON/OFF</button>\n"
    "          </td>\n"
    "          <td>\n"
    "            <img\n"
    "              id=\"batt\"\n"
    "              src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAhCAYAAABEM4KbAAAEDmlDQ1BrQ0dDb2xvclNwYWNlR2VuZXJpY1JHQgAAOI2NVV1oHFUUPpu5syskzoPUpqaSDv41lLRsUtGE2uj+ZbNt3CyTbLRBkMns3Z1pJjPj/KRpKT4UQRDBqOCT4P9bwSchaqvtiy2itFCiBIMo+ND6R6HSFwnruTOzu5O4a73L3PnmnO9+595z7t4LkLgsW5beJQIsGq4t5dPis8fmxMQ6dMF90A190C0rjpUqlSYBG+PCv9rt7yDG3tf2t/f/Z+uuUEcBiN2F2Kw4yiLiZQD+FcWyXYAEQfvICddi+AnEO2ycIOISw7UAVxieD/Cyz5mRMohfRSwoqoz+xNuIB+cj9loEB3Pw2448NaitKSLLRck2q5pOI9O9g/t/tkXda8Tbg0+PszB9FN8DuPaXKnKW4YcQn1Xk3HSIry5ps8UQ/2W5aQnxIwBdu7yFcgrxPsRjVXu8HOh0qao30cArp9SZZxDfg3h1wTzKxu5E/LUxX5wKdX5SnAzmDx4A4OIqLbB69yMesE1pKojLjVdoNsfyiPi45hZmAn3uLWdpOtfQOaVmikEs7ovj8hFWpz7EV6mel0L9Xy23FMYlPYZenAx0yDB1/PX6dledmQjikjkXCxqMJS9WtfFCyH9XtSekEF+2dH+P4tzITduTygGfv58a5VCTH5PtXD7EFZiNyUDBhHnsFTBgE0SQIA9pfFtgo6cKGuhooeilaKH41eDs38Ip+f4At1Rq/sjr6NEwQqb/I/DQqsLvaFUjvAx+eWirddAJZnAj1DFJL0mSg/gcIpPkMBkhoyCSJ8lTZIxk0TpKDjXHliJzZPO50dR5ASNSnzeLvIvod0HG/mdkmOC0z8VKnzcQ2M/Yz2vKldduXjp9bleLu0ZWn7vWc+l0JGcaai10yNrUnXLP/8Jf59ewX+c3Wgz+B34Df+vbVrc16zTMVgp9um9bxEfzPU5kPqUtVWxhs6OiWTVW+gIfywB9uXi7CGcGW/zk98k/kmvJ95IfJn/j3uQ+4c5zn3Kfcd+AyF3gLnJfcl9xH3OfR2rUee80a+6vo7EK5mmXUdyfQlrYLTwoZIU9wsPCZEtP6BWGhAlhL3p2N6sTjRdduwbHsG9kq32sgBepc+xurLPW4T9URpYGJ3ym4+8zA05u44QjST8ZIoVtu3qE7fWmdn5LPdqvgcZz8Ww8BWJ8X3w0PhQ/wnCDGd+LvlHs8dRy6bLLDuKMaZ20tZrqisPJ5ONiCq8yKhYM5cCgKOu66Lsc0aYOtZdo5QCwezI4wm9J/v0X23mlZXOfBjj8Jzv3WrY5D+CsA9D7aMs2gGfjve8ArD6mePZSeCfEYt8CONWDw8FXTxrPqx/r9Vt4biXeANh8vV7/+/16ffMD1N8AuKD/A/8leAvFY9bLAAAAOGVYSWZNTQAqAAAACAABh2kABAAAAAEAAAAaAAAAAAACoAIABAAAAAEAAAApoAMABAAAAAEAAAAhAAAAANOY7aQAAAEySURBVFgJ7ZhBCsIwEEV/ooJYdCMU69KNK09ij1vv4cojKHQlBUWwGhOlYRRpaRJswMymM20yef0zbWkYiI3BxQqMnOnG3UmGI0oNoh0FGGWDbqi+rHpJbxr0CekbYMVcgTJfASvQU3oFj9CrYi+PU3D0XZId1hedLtkMtW/rOINUgBTsM7YB5TaTfzWXzTAQyMxYaXmbgKnKTWPp9aF8FRmXu205246noGYS0gw/8I2VpGx1ZTctM83/P0q6UIsq9+n/j5KhJ2XtnTzdoSddKRl60pWSoSddKRl60pWSoSdtlFTq1fWizP1mNmpbfRZtFn67g4aAFyiRyJ8dH22Rlshxe22hjcDEUu5kHDJ/djMU4BZ3nCGY3lXzCZQCqgprSBXM41hMhPK6tUJS7fNcsz0A2HpaTvrlARMAAAAASUVORK5CYII=\"\n"
    "              style=\"display: none\"\n"
    "            />\n"
    "            <img\n"
    "              id=\"nobatt\"\n"
    "              src=\"data:image/png;base64,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\"\n"
    "              style=\"display: inline\"\n"
    "            />\n"
    "            <img\n"
    "              id=\"ocp\"\n"
    "              src=\"data:image/png;base64,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\"\n"
    "              style=\"display: none\"\n"
    "            />\n"
    "            <img\n"
    "              id=\"ovp\"\n"
    "              src=\"data:image/png;base64,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\"\n"
    "              style=\"display: none\"\n"
    "            />\n"
    "          </td>\n"
    "        </tr>\n"
    "      </tbody>\n"
    "    </table>\n"
    "  </div>\n"
    "</div>\n"
    "<div class=\"box\">\n"
    "  <table class=\"control\">\n"
    "    <colgroup>\n"
    "      <col width=\"20%\" />\n"
    "      <col width=\"1%\" />\n"
    "      <col width=\"1%\" />\n"
    "      <col width=\"20%\" />\n"
    "    </colgroup>\n"
    "    <tr>\n"
    "      <td></td>\n"
    "      <td><div id=\"graph\" align=\"center\"></div></td>\n"
    "      <td class=\"timescale\">\n"
    "        <button id=\"time0\" onclick=\"timescale(0);\" class=\"active\">All</button><br />\n"
    "        <button id=\"time1\" onclick=\"timescale(1);\">1h</button><br />\n"
    "        <button id=\"time2\" onclick=\"timescale(2);\">5m</button><br />\n"
    "        <button id=\"time3\" onclick=\"timescale(3);\">30s</button><br />\n"
    "        <button id=\"time4\" onclick=\"timescale(4);\">Clear</button><br />\n"
    "      </td>\n"
    "      <td></td>\n"
    "    </tr>\n"
    "  </table>\n"
    "</div>\n"
    "<script type=\"module\">\n"
    "  import * as d3 from \"https://cdn.jsdelivr.net/npm/d3@7/+esm\";\n"
    "  class TimeSeriesChart {\n"
    "    constructor({\n"
    "      data,\n"
    "      width = 500,\n"
    "      height = 196,\n"
    "      title,\n"
    "      yMin,\n"
    "      yMax,\n"
    "      format = \".4~s\",\n"
    "      legendValues = [],\n"
    "      rightFooter,\n"
    "      selectionHandler,\n"
    "      series = [],\n"
    "    } = {}) {\n"
    "      this._data = data;\n"
    "      this._sourcedata = data;\n"
    "      this._width = width;\n"
    "      this._height = height;\n"
    "      this._title = title;\n"
    "      this._yMin = yMin;\n"
    "      this._yMax = yMax;\n"
    "      this._format = format;\n"
    "      this._legendValues = legendValues;\n"
    "      this._rightFooter = rightFooter;\n"
    "      this._selectionHandler = selectionHandler;\n"
    "      this._series = series;\n"
    "      this._xStart = 0;\n"
    "      this._xEnd = 0;\n"
    "    }\n"
    "    get svg() {\n"
    "      if (this._svg === undefined) {\n"
    "        this._render();\n"
    "      }\n"
    "      return this._svg.node();\n"
    "    }\n"
    "    get data() {\n"
    "      return this._data;\n"
    "    }\n"
    "    set data(data) {\n"
    "      this._sourcedata = data;\n"
    "      this.refreshData();\n"
    "    }\n"
    "    appendTo(selector) {\n"
    "      d3.select(selector).append(() => this.svg);\n"
    "    }\n"
    "    appendData(newdata) {\n"
    "      this._sourcedata.push(newdata);\n"
    "      if (\n"
    "        typeof this._xStart !== \"number\" &&\n"
    "        typeof this._xEnd !== \"number\"\n"
    "      )\n"
    "        return;\n"
    "      this.refreshData();\n"
    "    }\n"
    "    clearData() {\n"
    "      this._sourcedata = [];\n"
    "      this._xStart = 0;\n"
    "      this._xEnd = 0;\n"
    "      this.refreshData();\n"
    "    }\n"
    "    setXLimits(startOffset, endOffset) {\n"
    "      this._xStart = startOffset;\n"
    "      this._xEnd = endOffset;\n"
    "      this.refreshData();\n"
    "    }\n"
    "    refreshData() {\n"
    "      let newdata = this._sourcedata;\n"
    "      if (this._xStart) {\n"
    "        let xStart = this._xStart;\n"
    "        if (typeof this._xStart === \"number\") {\n"
    "          xStart = new Date(Date.now() - this._xStart);\n"
    "        }\n"
    "        newdata = newdata.filter((d) => d.date >= xStart);\n"
    "      }\n"
    "      if (this._xEnd) {\n"
    "        let xEnd = this._xEnd;\n"
    "        if (typeof this._xEnd === \"number\") {\n"
    "          xEnd = new Date(Date.now() - this._xEnd);\n"
    "        }\n"
    "        newdata = newdata.filter((d) => d.date <= xEnd);\n"
    "      }\n"
    "      this._data = newdata;\n"
    "      if (this._svg === undefined) {\n"
    "        return;\n"
    "      }\n"
    "      const transitionDuration = 0;\n"
    "      const [yDomain, legendEntries] = this._prepare(this._data);\n"
    "      this._xScale.domain(d3.extent(this._data, (d) => d.date));\n"
    "      this._yScale.domain(yDomain).nice();\n"
    "      this._svg\n"
    "        .select(\".x-axis\")\n"
    "        .transition()\n"
    "        .duration(transitionDuration)\n"
    "        .ease(d3.easeExp)\n"
    "        .call(this._xAxis(this._xScale));\n"
    "      this._svg\n"
    "        .select(\".y-axis\")\n"
    "        .transition()\n"
    "        .duration(transitionDuration)\n"
    "        .ease(d3.easeExp)\n"
    "        .call(this._yAxis(this._yScale));\n"
    "      const pathFn = this._pathFn;\n"
    "      this._svg.selectAll(\".path\").each(function () {\n"
    "        d3.select(this)\n"
    "          .transition()\n"
    "          .duration(transitionDuration / 2)\n"
    "          .ease(d3.easeLinear)\n"
    "          .attr(\"opacity\", 0.0)\n"
    "          .on(\"end\", function () {\n"
    "            d3.select(this)\n"
    "              .attr(\"d\", pathFn[this.dataset.fn](newdata))\n"
    "              .transition()\n"
    "              .duration(transitionDuration / 2)\n"
    "              .ease(d3.easeExp)\n"
    "              .attr(\"opacity\", 1.0);\n"
    "          });\n"
    "      });\n"
    "      this._svg\n"
    "        .selectAll(\".legend-text\")\n"
    "        .data(legendEntries)\n"
    "        .text((d) => d.text);\n"
    "    }\n"
    "    _render() {\n"
    "      const margin = { top: 24, right: 0, bottom: 18, left: 50 };\n"
    "      const legendFontSize = 11;\n"
    "      const formatAsDate = d3.timeFormat(\"%-m/%-d\");\n"
    "      const formatAsTime = d3.timeFormat(\"%-H:%M:%S\");\n"
    "      const formatAsDateTime = d3.timeFormat(\"%Y-%m-%d %H:%M:%S\");\n"
    "      const xTickFormatter = (d) =>\n"
    "        d.getHours() === 0 && d.getMinutes() === 0\n"
    "          ? formatAsDate(d)\n"
    "          : formatAsTime(d);\n"
    "      const yTickFormatter =\n"
    "        typeof this._format === \"function\"\n"
    "          ? this._format(\"axis\")\n"
    "          : d3.format(this._format);\n"
    "      const yValueFormatter =\n"
    "        typeof this._format === \"function\"\n"
    "          ? this._format(\"value\")\n"
    "          : d3.format(this._format);\n"
    "      const boundaries = {\n"
    "        left: margin.left,\n"
    "        right: this._width - margin.right,\n"
    "        top: margin.top,\n"
    "        bottom: this._height - margin.bottom,\n"
    "      };\n"
    "      const axisStyler = (g) => {\n"
    "        g.selectAll(\"line\")\n"
    "          .attr(\"stroke\", \"lightgrey\")\n"
    "          .attr(\"stroke-opacity\", 0.7)\n"
    "          .attr(\"shape-rendering\", \"geometricPrecision\");\n"
    "        if (g.node().classList.contains(\"y-axis\")) {\n"
    "          g.select(\".domain\").attr(\"opacity\", 0.0);\n"
    "        } else {\n"
    "          g.select(\".domain\").attr(\"stroke\", \"grey\");\n"
    "        }\n"
    "      };\n"
    "      const [yDomain, legendEntries] = this._prepare(this._data);\n"
    "      const footerRows =\n"
    "        legendEntries.length === 0 && this._rightFooter !== undefined\n"
    "          ? 1\n"
    "          : legendEntries.length;\n"
    "      const svg = d3\n"
    "        .create(\"svg\")\n"
    "        .attr(\"width\", this._width)\n"
    "        .attr(\"height\", this._height + footerRows * (legendFontSize + 3));\n"
    "      const xScale = d3\n"
    "        .scaleTime()\n"
    "        .domain(d3.extent(this._data, (d) => d.date))\n"
    "        .range([boundaries.left, boundaries.right]);\n"
    "      const xAxis = (scale) => {\n"
    "        return (g) =>\n"
    "          g\n"
    "            .attr(\"class\", \"x-axis\")\n"
    "            .attr(\"transform\", `translate(0, ${boundaries.bottom})`)\n"
    "            .call(\n"
    "              d3\n"
    "                .axisBottom(scale)\n"
    "                .ticks(6)\n"
    "                .tickPadding(8)\n"
    "                .tickSizeInner(boundaries.top - boundaries.bottom)\n"
    "                .tickSizeOuter(0)\n"
    "                .tickFormat(xTickFormatter)\n"
    "            )\n"
    "            .call(axisStyler);\n"
    "      };\n"
    "      const yScale = d3\n"
    "        .scaleLinear()\n"
    "        .domain(yDomain)\n"
    "        .range([boundaries.bottom, boundaries.top])\n"
    "        .nice();\n"
    "      const yAxis = (scale) => {\n"
    "        return (g) =>\n"
    "          g\n"
    "            .attr(\"class\", \"y-axis\")\n"
    "            .attr(\"transform\", `translate(${boundaries.left}, 0)`)\n"
    "            .call(\n"
    "              d3\n"
    "                .axisLeft(scale)\n"
    "                .ticks(5)\n"
    "                .tickPadding(8)\n"
    "                .tickSizeInner(boundaries.left - boundaries.right)\n"
    "                .tickSizeOuter(0)\n"
    "                .tickFormat(yTickFormatter)\n"
    "            )\n"
    "            .call(axisStyler);\n"
    "      };\n"
    "      svg.append(\"g\").call(yAxis(yScale));\n"
    "      svg.append(\"g\").call(xAxis(xScale));\n"
    "      if (!window.hasOwnProperty(\"TimeSeriesChartCounter\")) {\n"
    "        window.TimeSeriesChartCounter = 0;\n"
    "      }\n"
    "      const clipId = `timeserieschart-clip-${++window.TimeSeriesChartCounter}`;\n"
    "      svg\n"
    "        .append(\"defs\")\n"
    "        .append(\"clipPath\")\n"
    "        .attr(\"id\", clipId)\n"
    "        .append(\"rect\")\n"
    "        .attr(\"x\", boundaries.left)\n"
    "        .attr(\"y\", boundaries.top - 1)\n"
    "        .attr(\"width\", boundaries.right - boundaries.left)\n"
    "        .attr(\"height\", boundaries.bottom - boundaries.top + 2);\n"
    "      let pathCnt = 0;\n"
    "      const pathFn = {};\n"
    "      const tooltipMetrics = [];\n"
    "      for (const [i, s] of this._series.entries()) {\n"
    "        const yPrepared =\n"
    "          s.hasOwnProperty(\"negativeY\") && s.negativeY\n"
    "            ? (d) => yScale(-d[s.metric])\n"
    "            : (d) => yScale(d[s.metric]);\n"
    "        if (s.hasOwnProperty(\"lineColor\")) {\n"
    "          pathCnt++;\n"
    "          const line = d3\n"
    "            .line()\n"
    "            .defined((d) => d[s.metric] !== null)\n"
    "            .x((d) => xScale(d.date))\n"
    "            .y(yPrepared);\n"
    "          svg\n"
    "            .append(\"path\")\n"
    "            .datum(this._data)\n"
    "            .attr(\"data-fn\", `path-${pathCnt}`)\n"
    "            .attr(\"class\", \"path\")\n"
    "            .attr(\"clip-path\", `url(#${clipId})`)\n"
    "            .attr(\"stroke\", s.lineColor)\n"
    "            .attr(\"fill\", \"none\")\n"
    "            .attr(\"stroke-width\", 1.0)\n"
    "            .attr(\"opacity\", 1.0)\n"
    "            .attr(\"d\", line)\n"
    "            .style(\"-webkit-clip-path\", `url(#${clipId})`);\n"
    "          pathFn[`path-${pathCnt}`] = line;\n"
    "        }\n"
    "        if (s.hasOwnProperty(\"fillColor\")) {\n"
    "          let baseline;\n"
    "          let defined;\n"
    "          pathCnt++;\n"
    "          if (s.hasOwnProperty(\"fillToMetric\") && s.fillToMetric) {\n"
    "            baseline =\n"
    "              s.hasOwnProperty(\"negativeY\") && s.negativeY\n"
    "                ? (d) => yScale(-d[s.fillToMetric])\n"
    "                : (d) => yScale(d[s.fillToMetric]);\n"
    "            defined = (d) =>\n"
    "              d[s.metric] !== null && d[s.metric] >= d[s.fillToMetric];\n"
    "          } else if (s.hasOwnProperty(\"fillToZero\") && s.fillToZero) {\n"
    "            baseline = (d) => yScale(0);\n"
    "            defined = (d) => d[s.metric] !== null && d[s.metric] >= 0;\n"
    "          } else {\n"
    "            baseline =\n"
    "              s.hasOwnProperty(\"negativeY\") && s.negativeY\n"
    "                ? (d) => yScale(yScale.domain()[1])\n"
    "                : (d) => yScale(yScale.domain()[0]);\n"
    "            defined = (d) => d[s.metric] !== null;\n"
    "          }\n"
    "          const [y0, y1] =\n"
    "            s.hasOwnProperty(\"negativeY\") && s.negativeY\n"
    "              ? [yPrepared, baseline]\n"
    "              : [baseline, yPrepared];\n"
    "          const area = d3\n"
    "            .area()\n"
    "            .defined(defined)\n"
    "            .x((d) => xScale(d.date))\n"
    "            .y0(y0)\n"
    "            .y1(y1);\n"
    "          svg\n"
    "            .append(\"path\")\n"
    "            .datum(this._data)\n"
    "            .attr(\"data-fn\", `path-${pathCnt}`)\n"
    "            .attr(\"class\", \"path\")\n"
    "            .attr(\"clip-path\", `url(#${clipId})`)\n"
    "            .attr(\"stroke\", \"none\")\n"
    "            .attr(\"fill\", s.fillColor)\n"
    "            .attr(\"opacity\", 1.0)\n"
    "            .attr(\"d\", area)\n"
    "            .style(\"-webkit-clip-path\", `url(#${clipId})`);\n"
    "          pathFn[`path-${pathCnt}`] = area;\n"
    "        }\n"
    "        if (s.hasOwnProperty(\"tooltip\") && s.tooltip) {\n"
    "          tooltipMetrics.push({ metric: s.metric, label: s.label });\n"
    "        }\n"
    "      }\n"
    "      if (\n"
    "        this._selectionHandler !== undefined ||\n"
    "        tooltipMetrics.length > 0\n"
    "      ) {\n"
    "        const context = d3.create(\"svg:g\");\n"
    "        let brush;\n"
    "        if (this._selectionHandler !== undefined) {\n"
    "          brush = d3\n"
    "            .brushX()\n"
    "            .extent([\n"
    "              [boundaries.left, boundaries.top],\n"
    "              [boundaries.right, boundaries.bottom],\n"
    "            ])\n"
    "            .on(\"start end\", ({ target, type, selection }) => {\n"
    "              svg.selectAll(\".interactive\").style(\"display\", \"none\");\n"
    "              if (type === \"end\" && selection !== null) {\n"
    "                this._selectionHandler(\n"
    "                  this,\n"
    "                  ...selection.map(xScale.invert)\n"
    "                );\n"
    "                svg.select(\".brush\").call(target.move, null);\n"
    "              }\n"
    "            });\n"
    "          context.attr(\"class\", \"brush\");\n"
    "          context.call(brush);\n"
    "          svg.attr(\"cursor\", \"crosshair\");\n"
    "        } else {\n"
    "          context\n"
    "            .append(\"rect\")\n"
    "            .attr(\"x\", boundaries.left)\n"
    "            .attr(\"y\", boundaries.top)\n"
    "            .attr(\"width\", boundaries.right - boundaries.left)\n"
    "            .attr(\"height\", boundaries.bottom - boundaries.top)\n"
    "            .attr(\"fill\", \"none\")\n"
    "            .attr(\"pointer-events\", \"all\");\n"
    "        }\n"
    "        if (tooltipMetrics.length > 0) {\n"
    "          const tooltipHeight =\n"
    "            20 + tooltipMetrics.length * (legendFontSize + 3);\n"
    "          const tooltip = d3\n"
    "            .create(\"svg:g\")\n"
    "            .attr(\"class\", \"interactive\")\n"
    "            .attr(\"font-family\", \"monospace\")\n"
    "            .attr(\"font-size\", legendFontSize + \"px\")\n"
    "            .attr(\"font-weight\", \"normal\")\n"
    "            .attr(\"fill\", \"black\")\n"
    "            .attr(\"stroke\", \"none\")\n"
    "            .attr(\"opacity\", 0.8)\n"
    "            .style(\"display\", \"none\");\n"
    "          tooltip\n"
    "            .append(\"rect\")\n"
    "            .attr(\"x\", 0)\n"
    "            .attr(\"y\", 0)\n"
    "            .attr(\"width\", 140)\n"
    "            .attr(\"height\", tooltipHeight)\n"
    "            .attr(\"fill\", \"white\")\n"
    "            .attr(\"stroke\", \"black\")\n"
    "            .attr(\"stroke-opacity\", 0.5)\n"
    "            .attr(\"shape-rendering\", \"crispEdges\");\n"
    "          tooltip\n"
    "            .append(\"text\")\n"
    "            .attr(\"class\", \"tooltip-x-value\")\n"
    "            .attr(\"x\", 70)\n"
    "            .attr(\"y\", 12)\n"
    "            .attr(\"text-anchor\", \"middle\");\n"
    "          let offset = 25;\n"
    "          for (const v of tooltipMetrics) {\n"
    "            tooltip\n"
    "              .append(\"text\")\n"
    "              .attr(\"x\", 10)\n"
    "              .attr(\"y\", offset)\n"
    "              .attr(\"text-anchor\", \"start\")\n"
    "              .text(v.label);\n"
    "            tooltip\n"
    "              .append(\"text\")\n"
    "              .attr(\"class\", \"tooltip-y-value\")\n"
    "              .attr(\"x\", 130)\n"
    "              .attr(\"y\", offset)\n"
    "              .attr(\"text-anchor\", \"end\");\n"
    "            offset += legendFontSize + 3;\n"
    "          }\n"
    "          const focus = svg\n"
    "            .append(\"line\")\n"
    "            .attr(\"class\", \"interactive\")\n"
    "            .attr(\"x1\", 0)\n"
    "            .attr(\"x2\", 0)\n"
    "            .attr(\"y1\", boundaries.top)\n"
    "            .attr(\"y2\", boundaries.bottom)\n"
    "            .attr(\"stroke\", \"red\")\n"
    "            .attr(\"opacity\", 0.5)\n"
    "            .style(\"display\", \"none\");\n"
    "          const bisect = d3.bisector((d) => d.date).left;\n"
    "          const flipCoordinates = [\n"
    "            boundaries.right - 155,\n"
    "            boundaries.bottom - tooltipHeight - 10,\n"
    "          ];\n"
    "          const mouseMoved = ({ offsetX: x, offsetY: y }) => {\n"
    "            if (\n"
    "              x < boundaries.left ||\n"
    "              x > boundaries.right ||\n"
    "              y < boundaries.top ||\n"
    "              y > boundaries.bottom\n"
    "            ) {\n"
    "              return;\n"
    "            }\n"
    "            if (focus.style(\"display\") !== \"block\") {\n"
    "              focus.style(\"display\", \"block\");\n"
    "            }\n"
    "            if (tooltip.style(\"display\") !== \"block\") {\n"
    "              tooltip.style(\"display\", \"block\");\n"
    "            }\n"
    "            const date = xScale.invert(x);\n"
    "            const index = bisect(this._data, date, 1);\n"
    "            const row =\n"
    "              date - this._data[index - 1].date >\n"
    "              this._data[index].date - date\n"
    "                ? this._data[index]\n"
    "                : this._data[index - 1];\n"
    "            const focusX = xScale(row.date);\n"
    "            const tooltipX =\n"
    "              focusX < flipCoordinates[0] ? focusX + 15 : focusX - 155;\n"
    "            const tooltipY =\n"
    "              y < flipCoordinates[1] ? y + 10 : y - tooltipHeight - 10;\n"
    "            focus.attr(\"transform\", `translate(${focusX}, 0)`);\n"
    "            tooltip.attr(\n"
    "              \"transform\",\n"
    "              `translate(${tooltipX}, ${tooltipY})`\n"
    "            );\n"
    "            tooltip\n"
    "              .select(\".tooltip-x-value\")\n"
    "              .text(formatAsDateTime(row.date));\n"
    "            tooltip\n"
    "              .selectAll(\".tooltip-y-value\")\n"
    "              .data(tooltipMetrics)\n"
    "              .text((d) =>\n"
    "                row[d.metric] !== null\n"
    "                  ? yValueFormatter(row[d.metric])\n"
    "                  : \"n/a\"\n"
    "              );\n"
    "          };\n"
    "          if (brush !== undefined) {\n"
    "            brush.on(\"brush\", ({ sourceEvent }) => {\n"
    "              if (\n"
    "                sourceEvent !== undefined &&\n"
    "                sourceEvent.type === \"mousemove\"\n"
    "              ) {\n"
    "                mouseMoved(sourceEvent);\n"
    "              }\n"
    "            });\n"
    "          }\n"
    "          context\n"
    "            .on(\"touchend mouseleave\", () => {\n"
    "              svg.selectAll(\".interactive\").style(\"display\", \"none\");\n"
    "            })\n"
    "            .on(\"touchmove mousemove\", mouseMoved);\n"
    "          svg.append((d) => context.node());\n"
    "          svg.append((d) => tooltip.node());\n"
    "        } else {\n"
    "          svg.append((d) => context.node());\n"
    "        }\n"
    "      }\n"
    "      if (footerRows > 0) {\n"
    "        const footer = svg\n"
    "          .append(\"g\")\n"
    "          .attr(\"transform\", `translate(0, ${this._height})`)\n"
    "          .attr(\"font-family\", \"monospace\")\n"
    "          .attr(\"font-size\", legendFontSize + \"px\")\n"
    "          .attr(\"font-weight\", \"normal\");\n"
    "        let offset = (legendFontSize + 3) / 2;\n"
    "        if (this._rightFooter !== undefined) {\n"
    "          footer\n"
    "            .append(\"text\")\n"
    "            .attr(\"x\", boundaries.right - 5)\n"
    "            .attr(\"y\", offset)\n"
    "            .attr(\"text-anchor\", \"end\")\n"
    "            .attr(\"dominant-baseline\", \"middle\")\n"
    "            .style(\"white-space\", \"pre\")\n"
    "            .text(this._rightFooter);\n"
    "        }\n"
    "        for (const v of legendEntries) {\n"
    "          footer\n"
    "            .append(\"rect\")\n"
    "            .attr(\"width\", 12)\n"
    "            .attr(\"height\", 4)\n"
    "            .attr(\"x\", margin.left / 2 + 4)\n"
    "            .attr(\"y\", offset - 2)\n"
    "            .attr(\"rx\", 2)\n"
    "            .attr(\"ry\", 2)\n"
    "            .attr(\"fill\", v.color);\n"
    "          footer\n"
    "            .append(\"text\")\n"
    "            .attr(\"class\", \"legend-text\")\n"
    "            .attr(\"x\", margin.left / 2 + 20)\n"
    "            .attr(\"y\", offset)\n"
    "            .attr(\"dominant-baseline\", \"middle\")\n"
    "            .style(\"white-space\", \"pre\")\n"
    "            .text(v.text);\n"
    "          offset += legendFontSize + 3;\n"
    "        }\n"
    "      }\n"
    "      if (this._title !== undefined) {\n"
    "        svg\n"
    "          .append(\"text\")\n"
    "          .attr(\"x\", this._width / 2)\n"
    "          .attr(\"y\", margin.top / 2)\n"
    "          .attr(\"font-family\", \"sans-serif\")\n"
    "          .attr(\"font-size\", \"12px\")\n"
    "          .attr(\"font-weight\", \"bold\")\n"
    "          .attr(\"text-anchor\", \"middle\")\n"
    "          .text(this._title);\n"
    "      }\n"
    "      this._xScale = xScale;\n"
    "      this._yScale = yScale;\n"
    "      this._xAxis = xAxis;\n"
    "      this._yAxis = yAxis;\n"
    "      this._pathFn = pathFn;\n"
    "      this._svg = svg;\n"
    "    }\n"
    "    _prepare(data) {\n"
    "      const yDomain = [\n"
    "        this._yMin !== undefined ? this._yMin : Infinity,\n"
    "        this._yMax !== undefined ? this._yMax : -Infinity,\n"
    "      ];\n"
    "      const yValueFormatter =\n"
    "        typeof this._format === \"function\"\n"
    "          ? this._format(\"value\")\n"
    "          : d3.format(this._format);\n"
    "      const formatter = (v) =>\n"
    "        v !== null && v !== undefined\n"
    "          ? yValueFormatter(v).padEnd(9, \" \")\n"
    "          : \"n/a      \";\n"
    "      const legendValues = [\n"
    "        ...new Set(\n"
    "          this._legendValues.filter((v) =>\n"
    "            [\"Min\", \"Max\", \"Avg\", \"Last\"].includes(v)\n"
    "          )\n"
    "        ),\n"
    "      ];\n"
    "      const legendEntries = [];\n"
    "      for (const s of this._series) {\n"
    "        const aggs = {};\n"
    "        if (s.hasOwnProperty(\"legend\") && s.legend) {\n"
    "          if (legendValues.includes(\"Min\")) {\n"
    "            aggs.min = d3.min(data, (d) => d[s.metric]);\n"
    "          }\n"
    "          if (legendValues.includes(\"Max\")) {\n"
    "            aggs.max = d3.max(data, (d) => d[s.metric]);\n"
    "          }\n"
    "          if (legendValues.includes(\"Avg\")) {\n"
    "            aggs.avg = d3.mean(data, (d) => d[s.metric]);\n"
    "          }\n"
    "          if (legendValues.includes(\"Last\")) {\n"
    "            if (data.length === 0) {\n"
    "              aggs.last = null;\n"
    "            } else {\n"
    "              aggs.last = data[data.length - 1][s.metric];\n"
    "            }\n"
    "          }\n"
    "          legendEntries.push({\n"
    "            color: s.lineColor ?? s.fillColor ?? \"white\",\n"
    "            text:\n"
    "              s.label.padEnd(15, \" \") +\n"
    "              legendValues\n"
    "                .map((v) => `${v}: ${formatter(aggs[v.toLowerCase()])}`)\n"
    "                .join(\"\"),\n"
    "          });\n"
    "        }\n"
    "        if (this._yMin === undefined) {\n"
    "          if (s.hasOwnProperty(\"negativeY\") && s.negativeY) {\n"
    "            yDomain[0] = aggs.hasOwnProperty(\"max\")\n"
    "              ? Math.min(yDomain[0], -aggs.max)\n"
    "              : Math.min(yDomain[0], -d3.max(data, (d) => d[s.metric]));\n"
    "          } else {\n"
    "            yDomain[0] = aggs.hasOwnProperty(\"min\")\n"
    "              ? Math.min(yDomain[0], aggs.min)\n"
    "              : Math.min(\n"
    "                  yDomain[0],\n"
    "                  d3.min(data, (d) => d[s.metric])\n"
    "                );\n"
    "          }\n"
    "        }\n"
    "        if (this._yMax === undefined) {\n"
    "          if (s.hasOwnProperty(\"negativeY\") && s.negativeY) {\n"
    "            yDomain[1] = aggs.hasOwnProperty(\"min\")\n"
    "              ? Math.max(yDomain[1], -aggs.min)\n"
    "              : Math.max(yDomain[1], -d3.min(data, (d) => d[s.metric]));\n"
    "          } else {\n"
    "            yDomain[1] = aggs.hasOwnProperty(\"max\")\n"
    "              ? Math.max(yDomain[1], aggs.max)\n"
    "              : Math.max(\n"
    "                  yDomain[1],\n"
    "                  d3.max(data, (d) => d[s.metric])\n"
    "                );\n"
    "          }\n"
    "        }\n"
    "      }\n"
    "      if (yDomain[0] === yDomain[1]) {\n"
    "        if (this._yMax !== undefined) {\n"
    "          yDomain[0]--;\n"
    "        } else {\n"
    "          yDomain[1]++;\n"
    "        }\n"
    "      }\n"
    "      return [yDomain, legendEntries];\n"
    "    }\n"
    "  }\n"
    "  function selectionHandler(caller, start, end) {\n"
    "    caller.setXLimits(start, end);\n"
    "    timescale(-1);\n"
    "  }\n"
    "  const chart = new TimeSeriesChart({\n"
    "    data: [],\n"
    "    width: 600,\n"
    "    height: 300,\n"
    "    yMin: 0,\n"
    "    format: \".2f\",\n"
    "    legendValues: [\"Min\", \"Max\", \"Avg\", \"Last\"],\n"
    "    selectionHandler: selectionHandler,\n"
    "    series: [\n"
    "      {\n"
    "        metric: \"out_v\",\n"
    "        label: \"Voltage (V)\",\n"
    "        lineColor: \"#1f77b4\",\n"
    "        legend: true,\n"
    "        tooltip: true,\n"
    "      },\n"
    "      {\n"
    "        metric: \"out_c\",\n"
    "        label: \"Current (A)\",\n"
    "        lineColor: \"#ff7f0e\",\n"
    "        legend: true,\n"
    "        tooltip: true,\n"
    "      },\n"
    "    ],\n"
    "  });\n"
    "  chart.appendTo(\"#graph\");\n"
    "  self.chart = chart;\n"
    "</script>\n"
    "<script>\n"
    "  function set_data(data, full_set = false) {\n"
    "    if (data === \"\") {\n"
    "      return;\n"
    "    }\n"
    "    const obj = JSON.parse(data);\n"
    "    self.out_v.innerHTML = obj.out_v.toFixed(2).padStart(6, \" \") + \" V\";\n"
    "    self.out_i.innerHTML = obj.out_c.toFixed(2).padStart(6, \" \") + \" A\";\n"
    "    if (full_set) {\n"
    "      self.set_v.value = obj.set_v.toFixed(2);\n"
    "      self.set_c.value = obj.set_c.toFixed(2);\n"
    "    }\n"
    "    document\n"
    "      .getElementById(\"set_v\")\n"
    "      .setAttribute(\"max\", obj.max_v.toFixed(2));\n"
    "    document\n"
    "      .getElementById(\"set_c\")\n"
    "      .setAttribute(\"max\", obj.max_c.toFixed(2));\n"
    "    if (obj.out_on) {\n"
    "      document.getElementById(\"toggle\").classList.add(\"is_on\");\n"
    "    } else {\n"
    "      document.getElementById(\"toggle\").classList.remove(\"is_on\");\n"
    "    }\n"
    "    if (obj.cvmode) {\n"
    "      document.getElementById(\"cv\").style.visibility = \"visible\";\n"
    "      document.getElementById(\"cc\").style.visibility = \"hidden\";\n"
    "    } else {\n"
    "      document.getElementById(\"cv\").style.visibility = \"hidden\";\n"
    "      document.getElementById(\"cc\").style.visibility = \"visible\";\n"
    "    }\n"
    "    if (obj.ext_t_c === null) {\n"
    "      self.ext_t_c.innerHTML = \"  --.-\";\n"
    "    } else {\n"
    "      self.ext_t_c.innerHTML = obj.ext_t_c.toFixed(1).padStart(6, \" \");\n"
    "    }\n"
    "    self.int_t_c.innerHTML = obj.int_t_c.toFixed(1).padStart(6, \" \");\n"
    "    self.batt_v.innerHTML = obj.batt_v.toFixed(2).padStart(6, \" \");\n"
    "    self.ah.innerHTML = obj.ah.toFixed(3).padStart(8, \" \");\n"
    "    self.wh.innerHTML = obj.wh.toFixed(3).padStart(8, \" \");\n"
    "    let img = \"nobatt\";\n"
    "    if (obj.prot === \"OVP\") {\n"
    "      img = \"ovp\";\n"
    "    } else if (obj.prot === \"OCP\") {\n"
    "      img = \"ocp\";\n"
    "    } else if (obj.batt_mode) {\n"
    "      img = \"batt\";\n"
    "    }\n"
    "    document.getElementById(\"batt\").style.display = \"none\";\n"
    "    document.getElementById(\"nobatt\").style.display = \"none\";\n"
    "    document.getElementById(\"ovp\").style.display = \"none\";\n"
    "    document.getElementById(\"ocp\").style.display = \"none\";\n"
    "    document.getElementById(img).style.display = \"inline\";\n"
    "    if (self.chart) {\n"
    "      self.chart.appendData({\n"
    "        date: new Date(),\n"
    "        out_v: obj.out_v,\n"
    "        out_c: obj.out_c,\n"
    "      });\n"
    "    }\n"
    "  }\n"
    "  let tick_done = true;\n"
    "  function tick(full_set = false) {\n"
    "    if (!tick_done) {\n"
    "      console.warn(\"Tick already in progress, skipping this tick. The PSU is too slow.\");\n"
    "      return;\n"
    "    }\n"
    "    tick_done = false;\n"
    "    try {\n"
    "      fetch(\"/status\")\n"
    "        .then((response) => {\n"
    "          if (!response.ok) {\n"
    "            return \"\";\n"
    "          }\n"
    "          return response.text();\n"
    "        })\n"
    "        .then((data) => {\n"
    "          if (data !== \"\") {\n"
    "            set_data(data, full_set);\n"
    "          } else {\n"
    "            console.warn(\"No data received from /status\");\n"
    "          }\n"
    "          tick_done = true;\n"
    "        });\n"
    "    } catch (e) {\n"
    "      console.error(\"Error fetching status:\", e);\n"
    "      tick_done = true;\n"
    "    }\n"
    "  }\n"
    "  function setv() {\n"
    "    const v = self.set_v.value.trim();\n"
    "    if (v === \"\") {\n"
    "      alert(\"Please enter a voltage\");\n"
    "      return;\n"
    "    }\n"
    "    document.body.style.cursor = \"wait\";\n"
    "    document.getElementById(\"setv\").style.cursor = \"wait\";\n"
    "    try {\n"
    "      fetch(\"/set_v\", { method: \"POST\", body: v }).then((response) => {\n"
    "        document.body.style.cursor = \"default\";\n"
    "        document.getElementById(\"setv\").style.cursor = \"pointer\";\n"
    "        if (!response.ok) {\n"
    "          throw new Error(\"ERR: \" + response.statusText);\n"
    "        }\n"
    "      });\n"
    "    } catch (e) {\n"
    "      console.error(\"Error setting voltage:\", e);\n"
    "      alert(\"Error setting voltage: \" + e.message);\n"
    "      document.body.style.cursor = \"default\";\n"
    "      document.getElementById(\"setv\").style.cursor = \"pointer\";\n"
    "    }\n"
    "  }\n"
    "  function seti() {\n"
    "    const v = self.set_c.value.trim();\n"
    "    if (v === \"\") {\n"
    "      alert(\"Please enter a current\");\n"
    "      return;\n"
    "    }\n"
    "    document.body.style.cursor = \"wait\";\n"
    "    document.getElementById(\"seti\").style.cursor = \"wait\";\n"
    "    try {\n"
    "      fetch(\"/set_i\", { method: \"POST\", body: v }).then((response) => {\n"
    "        document.body.style.cursor = \"default\";\n"
    "        document.getElementById(\"seti\").style.cursor = \"pointer\";\n"
    "        if (!response.ok) {\n"
    "          throw new Error(\"ERR: \" + response.statusText);\n"
    "        }\n"
    "      });\n"
    "    } catch (e) {\n"
    "      console.error(\"Error setting current:\", e);\n"
    "      alert(\"Error setting current: \" + e.message);\n"
    "      document.body.style.cursor = \"default\";\n"
    "      document.getElementById(\"seti\").style.cursor = \"pointer\";\n"
    "    }\n"
    "  }\n"
    "  function toggle() {\n"
    "    document.body.style.cursor = \"wait\";\n"
    "    document.getElementById(\"toggle\").style.cursor = \"wait\";\n"
    "    try {\n"
    "      fetch(\"/toggle_out\")\n"
    "        .then((response) => {\n"
    "          document.body.style.cursor = \"default\";\n"
    "          document.getElementById(\"toggle\").style.cursor = \"pointer\";\n"
    "          if (!response.ok) {\n"
    "            throw new Error(\"ERR: \" + response.statusText);\n"
    "          }\n"
    "          return response.text();\n"
    "        })\n"
    "        .then((data) => {\n"
    "          set_data(data, false);\n"
    "        });\n"
    "    } catch (e) {\n"
    "      console.error(\"Error in toggle:\", e);\n"
    "      alert(\"Error in toggle: \" + e.message);\n"
    "      document.body.style.cursor = \"default\";\n"
    "      document.getElementById(\"toggle\").style.cursor = \"pointer\";\n"
    "    }\n"
    "  }\n"
    "  function timescale(t) {\n"
    "    const buttons = document.querySelectorAll(\".timescale button\");\n"
    "    buttons.forEach((button) => {\n"
    "      button.classList.remove(\"active\");\n"
    "    });\n"
    "    if (t >= 0) {\n"
    "      if (t < 4) {\n"
    "        document.getElementById(\"time\" + t).classList.add(\"active\");\n"
    "      } else {\n"
    "        document.getElementById(\"time0\").classList.add(\"active\");\n"
    "      }\n"
    "    }\n"
    "    if (t === 0) {\n"
    "      self.chart.setXLimits(0, 0);\n"
    "    } else if (t === 1) {\n"
    "      self.chart.setXLimits(60 * 60 * 1000, 0);\n"
    "    } else if (t === 2) {\n"
    "      self.chart.setXLimits(5 * 60 * 1000, 0);\n"
    "    } else if (t === 3) {\n"
    "      self.chart.setXLimits(30 * 1000, 0);\n"
    "    } else if (t === 4){\n"
    "      self.chart.clearData();\n"
    "    }\n"
    "  }\n"
    "  window.addEventListener(\"load\", function () {\n"
    "    tick(true);\n"
    "    setInterval(tick, 1000);\n"
    "  });\n"
    "</script>";
// END OF SECTION GENERATED BY 'extract_code.py'

/**
 * @brief LXI identification document template.
 *
 * Substitution variables:
 *
 * 0 = Model
 * 1 = Serial Number
 * 2 = Firmware Revision
 * 3 = Hostname
 * 4 = IP Address
 * 5 = Subnet mask
 * 6 = MAC Address
 * 7 = IP Gateway
 * 8 = VISA Resource Address 1
 * 9 = VISA Resource Address 2
 */
static const char *LXI_IDENTIFICATION_TEMPLATE = R"==(<?xml version="1.0" encoding="UTF-8" ?>
<LXIDevice xmlns="http://www.lxistandard.org/InstrumentIdentification/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.lxistandard.org/InstrumentIdentification/1.0/LXIIdentification.xsd">
    <Manufacturer>Riden</Manufacturer>
    <Model>${0}</Model>
    <SerialNumber>${1}</SerialNumber>
    <FirmwareRevision>${2}</FirmwareRevision>
    <ManufacturerDescription>Power Supply</ManufacturerDescription>
    <IdentificationURL>http://${3}.local/lxi/identification</IdentificationURL>
    <Interface xsi:type="NetworkInformation" InterfaceType="LXI" IPType="IPv4">
        <InstrumentAddressString>${8}</InstrumentAddressString>
        <InstrumentAddressString>${9}</InstrumentAddressString>
        <Hostname>${3}</Hostname>
        <IPAddress>${4}</IPAddress>
        <SubnetMask>${5}</SubnetMask>
        <MACAddress>${6}</MACAddress>
        <Gateway>${7}</Gateway>
        <DHCPEnabled>true</DHCPEnabled>
        <AutoIPEnabled>true</AutoIPEnabled>
    </Interface>
    <LXIVersion>1.5</LXIVersion>
</LXIDevice>
)==";
